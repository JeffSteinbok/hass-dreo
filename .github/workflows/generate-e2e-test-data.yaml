name: Generate E2E Test Data

# This workflow is DISABLED - E2E test data generation is now handled by the
# testScripts/deploy_to_ha.py deployment script. 
# The workflow is kept for reference but will not run automatically.
#
# Previous behavior:
# This workflow automatically generated E2E test data when API response files were updated.
# It ran on non-primary branches (not main or beta) when changes were pushed to the
# tests/pydreo/api_responses directory. The workflow executed the generateE2ETestData.py
# script and committed the generated files back to the branch.

on:
  workflow_dispatch:  # Manual trigger only
  # Disabled automatic triggers:
  # push:
  #   branches-ignore:
  #     - main
  #     - beta
  #   paths:
  #     - 'tests/pydreo/api_responses/**'

permissions:
  contents: write

jobs:
  generate:
    name: Generate E2E Test Data
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
      with:
        token: ${{ secrets.GITHUB_TOKEN }}
    
    - name: Set up Python 3.13
      uses: actions/setup-python@v5
      with:
        python-version: "3.13"
    
    - name: Generate E2E test data
      run: |
        python3 testScripts/generateE2ETestData.py
        echo "E2E test data generated to testScripts/temp/e2e_test_data/"
        ls -la testScripts/temp/e2e_test_data/
    
    - name: Note
      run: |
        echo "Note: E2E test data is generated but not committed."
        echo "Use testScripts/deploy_to_ha.py to deploy to your HA instance."
